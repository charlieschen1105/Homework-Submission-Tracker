<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>å…¨ç§‘ä½œä¸šç™»è®° Pro (éœ‡åŠ¨ç‰ˆ)</title>
    <!-- æ ¸å¿ƒåº“ -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <!-- å›¾æ ‡åº“ -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

    <style>
        :root {
            --primary: #4e54c8;
            --accent: #8f94fb;
            --success: #00c853;
            --danger: #ff5252;
            --warning: #ff9800;
            --bg: #f4f6f9;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --text-sub: #95a5a6;
            --shadow: 0 4px 12px rgba(0,0,0,0.05);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0; background: var(--bg); color: var(--text-main);
            -webkit-tap-highlight-color: transparent; user-select: none;
        }

        /* --- æ‰“å°ä¼˜åŒ– --- */
        #print-area { display: none; }
        @media print {
            .header-section, .fab-container, .modal-overlay, .main-content, .toast, .wechat-tip-overlay { display: none !important; }
            #print-area { display: block; padding: 10px; font-family: sans-serif; }
            .print-title { text-align: center; margin-bottom: 20px; font-size: 24px; }
            .qr-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
            .qr-card { border: 1px dashed #aaa; padding: 15px 10px; text-align: center; page-break-inside: avoid; border-radius: 8px; }
            .qr-img-container img { margin: 0 auto; display: block; }
        }

        /* --- è®¤è¯ç•Œé¢ --- */
        .auth-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; box-sizing: border-box; color: white;
        }
        .auth-card {
            background: white; color: var(--text-main); width: 100%; max-width: 320px;
            padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .auth-title { font-size: 24px; font-weight: 700; margin-bottom: 20px; text-align: center; color: var(--primary); }
        .auth-input {
            width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd;
            border-radius: 10px; box-sizing: border-box; font-size: 16px; background: #f9f9f9;
        }
        .auth-btn {
            width: 100%; padding: 12px; background: var(--primary); color: white;
            border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 10px;
        }
        .auth-btn.secondary { background: #f0f0f0; color: #666; margin-top: 10px; }
        .class-select-group { max-height: 150px; overflow-y: auto; margin-bottom: 15px; border: 1px solid #eee; padding: 10px; border-radius: 8px; }
        .checkbox-item { display: flex; align-items: center; margin-bottom: 8px; font-size: 14px; }
        .checkbox-item input { margin-right: 10px; transform: scale(1.2); }

        /* --- ä¸»ç•Œé¢ --- */
        .header-section {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 20px 20px 10px; border-radius: 0 0 24px 24px; color: white;
            position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 15px rgba(78, 84, 200, 0.3);
        }

        .nav-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .app-title { font-size: 20px; font-weight: 700; display: flex; align-items: center; gap: 8px; }
        .icon-btn { background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px; border-radius: 12px; cursor: pointer; backdrop-filter: blur(5px); margin-left: 8px; }
        .notice-dot { position:absolute; top:8px; right:8px; width:8px; height:8px; background:var(--danger); border-radius:50%; border:2px solid var(--accent); }

        .subject-tabs {
            display: flex; gap: 10px; overflow-x: auto; padding-bottom: 15px;
            margin: 0 -10px; padding-left: 20px; padding-right: 20px; scrollbar-width: none;
        }
        .subject-tab {
            background: rgba(255,255,255,0.2); color: rgba(255,255,255,0.9);
            padding: 6px 16px; border-radius: 20px; font-size: 14px; white-space: nowrap;
            transition: all 0.3s; border: 1px solid transparent;
        }
        .subject-tab.active { background: white; color: var(--primary); font-weight: 700; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        .info-bar {
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.1); padding: 5px; border-radius: 16px; margin-bottom: 15px;
        }
        .class-selector { display: flex; background: rgba(255,255,255,0.2); border-radius: 12px; padding: 2px; overflow-x: auto; max-width: 60%; }
        .class-btn { padding: 6px 12px; font-size: 13px; color: rgba(255,255,255,0.8); border-radius: 10px; white-space: nowrap; transition: all 0.2s; }
        .class-btn.active { background: white; color: var(--primary); font-weight: 600; }
        
        .progress-text { font-size: 13px; margin-right: 10px; font-variant-numeric: tabular-nums; }
        .progress-container { height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; overflow: hidden; margin-bottom: 10px; }
        .progress-bar { height: 100%; background: #fff; width: 0%; transition: width 0.3s ease; }
        .progress-bar.complete { background: var(--success); }

        .main-content { padding: 20px 15px 100px; }
        .empty-state { text-align: center; color: var(--text-sub); margin-top: 50px; }
        
        .student-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
        @media (min-width: 480px) { .student-grid { grid-template-columns: repeat(2, 1fr); } }

        .student-card {
            background: var(--card-bg); border-radius: 16px; padding: 12px 15px; 
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: var(--shadow); transition: transform 0.1s; position: relative;
        }
        .student-left { display: flex; align-items: center; gap: 12px; flex: 1; overflow: hidden; }
        .student-avatar {
            width: 42px; height: 42px; border-radius: 50%; background: #f0f2f5; color: var(--text-sub);
            display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 15px; flex-shrink: 0;
        }
        .student-info { display: flex; flex-direction: column; overflow: hidden; }
        .student-name { font-weight: 700; font-size: 17px; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .student-id { font-size: 12px; color: var(--text-sub); margin-top: 2px; }

        .action-area { display: flex; align-items: center; gap: 10px; flex-shrink: 0; }
        .btn-camera { 
            background: #f0f2f5; border: none; min-width: 36px; height: 36px; padding: 0 8px; border-radius: 18px; 
            display: flex; align-items: center; justify-content: center; color: #666; cursor: pointer; font-size:12px; gap:4px;
        }
        .btn-camera:active { background: #e0e0e0; }
        .status-badge {
            font-size: 12px; padding: 4px 8px; border-radius: 10px; background: #eee; color: #999;
            display: flex; align-items: center; gap: 4px;
        }

        .student-card.done { border: 1px solid var(--success); background: #fafffc; }
        .student-card.done .student-avatar { background: var(--success); color: white; }
        .student-card.done .student-name { color: #1b5e20; }
        .student-card.done .status-badge { background: #e8f5e9; color: var(--success); }

        /* --- æ¨¡æ€æ¡†ä¸å¼¹çª— --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5);
            z-index: 200; backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center;
        }
        .modal-sheet {
            background: white; width: 100%; border-radius: 24px 24px 0 0; padding: 25px;
            box-sizing: border-box; animation: slideUp 0.3s ease; max-height: 90vh; overflow-y: auto; position: fixed; bottom: 0;
        }
        .modal-center {
            background: white; width: 90%; max-width: 400px; border-radius: 20px; padding: 20px;
            animation: popIn 0.3s ease; display: flex; flex-direction: column; max-height: 85vh; position: relative;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes popIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* å…¬å‘Šæ¿ */
        .notice-textarea { 
            width: 100%; height: 120px; border: 1px solid #ddd; border-radius: 10px; padding: 10px; 
            font-family: inherit; font-size: 15px; margin: 10px 0; resize: none; box-sizing: border-box;
        }

        /* ç›¸æœº UI */
        .camera-full-overlay {
            position: fixed; inset: 0; background: black; z-index: 500; display: flex; flex-direction: column;
        }
        .camera-header {
            padding: 15px; color: white; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3);
            position: absolute; top:0; left:0; right:0; z-index: 10;
        }
        .camera-view-container { flex: 1; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        video#camera-feed { width: 100%; height: 100%; object-fit: cover; }
        
        .camera-footer {
            background: rgba(0,0,0,0.8); padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 15px;
            padding-bottom: calc(20px + var(--safe-bottom));
        }
        .thumb-strip {
            display: flex; gap: 10px; overflow-x: auto; width: 100%; padding-bottom: 5px; min-height: 60px;
        }
        .thumb-item {
            width: 50px; height: 50px; border-radius: 8px; border: 2px solid white; object-fit: cover; flex-shrink: 0;
        }
        .shutter-row { display: flex; align-items: center; justify-content: center; width: 100%; gap: 30px; }
        .shutter-btn { 
            width: 70px; height: 70px; border-radius: 50%; background: white; border: 4px solid #ccc; 
            cursor: pointer; display: flex; align-items: center; justify-content: center;
        }
        .shutter-btn:active { transform: scale(0.95); background: #eee; }
        .shutter-inner { width: 60px; height: 60px; border-radius: 50%; background: var(--primary); }
        
        .btn-system-cam {
            background: rgba(255,255,255,0.2); color: white; padding: 8px 15px; border-radius: 20px; font-size: 12px;
            border: 1px solid rgba(255,255,255,0.5); display: flex; align-items: center; gap: 5px;
        }

        /* é¢„è§ˆç½‘æ ¼ */
        .preview-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0; max-height: 60vh; overflow-y: auto; }
        .preview-item { position: relative; padding-top: 100%; }
        .preview-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; border-radius: 8px; }
        .preview-del {
            position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; border-radius: 50%;
            width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 14px;
        }

        .menu-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px; }
        .menu-item { display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 15px; background: #f8f9fa; border-radius: 12px; font-size: 13px; }
        
        .fab-container { position: fixed; bottom: calc(20px + var(--safe-bottom)); left: 50%; transform: translateX(-50%); z-index: 90; }
        .fab-btn {
            height: 56px; padding: 0 24px; border-radius: 28px; border: none; background: var(--text-main); color: white;
            font-weight: 600; font-size: 16px; box-shadow: 0 8px 20px rgba(0,0,0,0.2); display: flex; align-items: center; gap: 8px;
        }

        .btn-full { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: 600; margin-top: 10px; cursor: pointer; }
        .btn-blue { background: var(--primary); color: white; }
        .btn-green { background: var(--success); color: white; }
        .btn-red { background: #ffebee; color: var(--danger); }

        .toast {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px);
            background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 50px; font-size: 14px;
            z-index: 2000; transition: transform 0.3s; display: flex; align-items: center; gap: 8px;
        }
        .toast.show { transform: translateX(-50%) translateY(0); }
        .toast.success { background: #00c853; }
        .toast.error { background: #d32f2f; }
        
        .wechat-tip-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 5000; color: white; text-align: right; padding: 20px 30px; }
    </style>
</head>
<body :class="{'print-mode': printing}">
    <div id="app">
        <!-- ç³»ç»Ÿç›¸æœºå…œåº• Input -->
        <input type="file" id="system-camera-input" accept="image/*" capture="environment" style="display:none" @change="handleSystemCamera" />
        <input type="file" id="file-upload" accept=".xlsx, .xls" @change="handleFileUpload" style="display:none" />
        
        <!-- å¾®ä¿¡å¯¼å‡ºæç¤º -->
        <div v-if="showWeChatTip" class="wechat-tip-overlay" @click="showWeChatTip=false">
            <span class="material-icons-round" style="font-size:48px; display:block; margin-bottom:10px;">arrow_upward</span>
            <div style="font-size:18px; font-weight:bold;">è¯·ç‚¹å‡»å³ä¸Šè§’èœå•</div>
            <div>é€‰æ‹©â€œåœ¨æµè§ˆå™¨æ‰“å¼€â€ä»¥å¯¼å‡ºæ–‡ä»¶</div>
        </div>

        <!-- è®¤è¯ç•Œé¢ -->
        <div v-if="!isLoggedIn" class="auth-overlay">
            <div class="auth-card">
                <div class="auth-title">{{ isRegistering ? 'æ³¨å†Œæ–°æ•™å¸ˆ' : 'æ•™å¸ˆç™»å½•' }}</div>
                <input class="auth-input" v-model="authForm.username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" />
                <input class="auth-input" v-model="authForm.password" type="password" placeholder="è¯·è¾“å…¥å¯†ç " />
                <div v-if="isRegistering">
                    <div style="font-size:14px; margin-bottom:5px; color:#666;">è¯·é€‰æ‹©ä»»æ•™ç­çº§ (å¯å¤šé€‰):</div>
                    <div class="class-select-group">
                        <div v-if="allClassList.length === 0" style="color:#999; font-size:12px; text-align:center;">æš‚æ— ç­çº§æ•°æ®</div>
                        <div v-for="cls in allClassList" :key="cls" class="checkbox-item">
                            <input type="checkbox" :id="'chk-'+cls" :value="cls" v-model="authForm.selectedClasses">
                            <label :for="'chk-'+cls">{{ cls }}ç­</label>
                        </div>
                    </div>
                </div>
                <button class="auth-btn" @click="handleAuth" :disabled="authLoading">{{ authLoading ? 'å¤„ç†ä¸­...' : (isRegistering ? 'æ³¨å†Œ' : 'ç™»å½•') }}</button>
                <button class="auth-btn secondary" @click="toggleAuthMode">{{ isRegistering ? 'å»ç™»å½•' : 'å»æ³¨å†Œ' }}</button>
            </div>
        </div>

        <!-- ä¸»ç•Œé¢ -->
        <template v-else>
            <header class="header-section">
                <div class="nav-top">
                    <div class="app-title">
                        <span class="material-icons-round">folder_shared</span>
                        å…¨ç§‘ä½œä¸šç™»è®°
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span style="font-size:12px; opacity:0.8; margin-right:5px;">{{ currentUser.username }}</span>
                        <button class="icon-btn" @click="openNoticeModal" style="position:relative;">
                            <span class="material-icons-round">campaign</span>
                            <span v-if="currentNotice" class="notice-dot"></span>
                        </button>
                        <button class="icon-btn" @click="showMenu = true">
                            <span class="material-icons-round">tune</span>
                        </button>
                    </div>
                </div>

                <div class="subject-tabs">
                    <div v-for="sub in subjects" :key="sub" class="subject-tab" 
                        :class="{active: currentSubject === sub}" @click="currentSubject = sub">
                        {{ sub }}
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-bar" :class="{complete: percentage === 100}" :style="{width: percentage + '%'}"></div>
                </div>

                <div class="info-bar">
                    <div class="class-selector">
                        <div v-if="allowedClassList.length === 0" style="padding:5px; font-size:12px; color:rgba(255,255,255,0.7);">è¯·åœ¨èœå•æ·»åŠ ç­çº§</div>
                        <div v-for="cls in allowedClassList" :key="cls" class="class-btn" 
                            :class="{active: currentClass === cls}" @click="currentClass = cls">
                            {{ cls }}ç­
                        </div>
                    </div>
                    <div class="progress-text">{{ submittedCount }}/{{ currentList.length }}</div>
                </div>
            </header>

            <main class="main-content">
                <div v-if="currentList.length === 0" class="empty-state">
                    <span class="material-icons-round" style="font-size: 48px; opacity: 0.3;">group_off</span>
                    <p>æš‚æ— å­¦ç”Ÿåå•</p>
                    <button class="btn-blue btn-full" style="width:auto; padding:8px 20px;" @click="showClassManager = true">æ·»åŠ å­¦ç”Ÿ/ç­çº§</button>
                </div>

                <div class="student-grid" v-else>
                    <div v-for="s in currentList" :key="s.uid" class="student-card" :class="{done: s.submitted}">
                        <!-- å·¦ä¾§ï¼šç‚¹å‡»åˆ‡æ¢çŠ¶æ€ -->
                        <div class="student-left" @click="toggleStatus(s)">
                            <div class="student-avatar">{{ s.no }}</div>
                            <div class="student-info">
                                <div class="student-name">{{ s.name }}</div>
                                <div class="student-id">{{ s.classId }}ç­ {{ s.no }}å·</div>
                            </div>
                        </div>

                        <!-- å³ä¾§ï¼šæ“ä½œåŒº -->
                        <div class="action-area">
                            <div v-if="s.imgCount > 0" class="btn-camera" style="color:var(--primary); background:#e3f2fd;" @click.stop="viewImages(s)">
                                <span class="material-icons-round">photo_library</span> {{ s.imgCount }}
                            </div>
                            <button v-else class="btn-camera" @click.stop="openCamera(s)">
                                <span class="material-icons-round">photo_camera</span>
                            </button>
                            <div class="status-badge">
                                <span class="material-icons-round" style="font-size:14px;">{{ s.submitted ? 'check_circle' : 'pending' }}</span>
                                {{ s.submitted ? 'å·²äº¤' : 'æœªäº¤' }}
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <div class="fab-container">
                <button class="fab-btn" style="background:var(--primary);" @click="startScan">
                    <span class="material-icons-round">qr_code_scanner</span> æ‰«ç ç™»è®°
                </button>
            </div>
        </template>

        <!-- èœå• -->
        <div class="modal-overlay" v-if="showMenu" @click.self="showMenu = false">
            <div class="modal-sheet">
                <div style="font-size:18px; font-weight:700; margin-bottom:20px;">ç³»ç»Ÿèœå•</div>
                <div class="menu-grid">
                    <div class="menu-item" @click="triggerFileUpload">
                        <span class="material-icons-round" style="color:#4caf50; font-size:24px;">upload_file</span><span>Excelå¯¼å…¥</span>
                    </div>
                    <div class="menu-item" @click="showClassManager = true; showMenu = false;">
                        <span class="material-icons-round" style="color:#607d8b; font-size:24px;">manage_accounts</span><span>ç­çº§ç®¡ç†</span>
                    </div>
                    <div class="menu-item" @click="exportExcel">
                        <span class="material-icons-round" style="color:#2196f3; font-size:24px;">file_download</span><span>å¯¼å‡ºç»Ÿè®¡</span>
                    </div>
                    <div class="menu-item" @click="preparePrint">
                        <span class="material-icons-round" style="color:#333; font-size:24px;">print</span><span>æ‰“å°äºŒç»´ç </span>
                    </div>
                    <div class="menu-item" @click="resetCurrentSubject">
                        <span class="material-icons-round" style="color:orange; font-size:24px;">restart_alt</span><span>é‡ç½®æœ¬ç§‘ç›®</span>
                    </div>
                    <div class="menu-item" @click="showUserSetting = true; showMenu = false;">
                        <span class="material-icons-round" style="color:#7b1fa2; font-size:24px;">perm_identity</span><span>è´¦æˆ·è®¾ç½®</span>
                    </div>
                </div>
                <div style="border-top:1px solid #eee; padding-top:15px;">
                    <div style="display:flex; gap:10px;">
                        <button class="btn-full" style="background:#e3f2fd; color:#1565c0; margin:0;" @click="uploadData" :disabled="loading">{{ loading?'...':'åŒæ­¥ä¸Šä¼ ' }}</button>
                        <button class="btn-full" style="background:#f3e5f5; color:#6a1b9a; margin:0;" @click="downloadData" :disabled="loading">{{ loading?'...':'åŒæ­¥ä¸‹è½½' }}</button>
                    </div>
                    <button class="btn-full btn-red" @click="logout" style="margin-top:15px;">é€€å‡ºç™»å½•</button>
                </div>
            </div>
        </div>

        <!-- 1. å…¬å‘Šå¼¹çª— -->
        <div class="modal-overlay" v-if="showNoticeModal" @click.self="showNoticeModal = false">
            <div class="modal-center">
                <div style="font-size:18px; font-weight:700;">ğŸ“¢ {{currentSubject}}ä½œä¸šè¦æ±‚</div>
                <textarea class="notice-textarea" v-model="tempNoticeText" placeholder="åœ¨æ­¤è¾“å…¥ä»Šæ—¥ä½œä¸šå†…å®¹..."></textarea>
                <div style="display:flex; gap:10px;">
                    <button class="btn-full btn-red" v-if="tempNoticeText" @click="clearNotice">æ¸…ç©º</button>
                    <button class="btn-full btn-blue" @click="saveNotice">ä¿å­˜</button>
                </div>
                <button style="margin-top:10px; background:none; border:none; color:#666;" @click="showNoticeModal = false">å…³é—­</button>
            </div>
        </div>

        <!-- 2. å…¨å±ç›¸æœºç•Œé¢ -->
        <div class="camera-full-overlay" v-if="cameraActive">
            <canvas id="photo-canvas" style="display:none;"></canvas>
            <div class="camera-header">
                <span style="font-weight:600;">{{currentPhotoStudent?.name}} ({{tempImages.length}}/10)</span>
                <span class="material-icons-round" @click="closeCamera">close</span>
            </div>
            
            <div class="camera-view-container">
                <video id="camera-feed" autoplay playsinline webkit-playsinline></video>
                <div v-if="cameraError" style="position:absolute; color:white; text-align:center; padding:20px;">
                    <span class="material-icons-round" style="font-size:48px; opacity:0.5;">videocam_off</span>
                    <p>ç½‘é¡µç›¸æœºå¯åŠ¨å¤±è´¥</p>
                    <p style="font-size:12px; opacity:0.8;">è¯·ä½¿ç”¨ä¸‹æ–¹"ç³»ç»Ÿç›¸æœº"æŒ‰é’®</p>
                </div>
            </div>

            <div class="camera-footer">
                <div class="thumb-strip" v-if="tempImages.length > 0">
                    <img v-for="(img, idx) in tempImages" :key="idx" :src="img" class="thumb-item" />
                </div>
                <div class="shutter-row">
                    <button class="btn-system-cam" @click="triggerSystemCamera">
                        <span class="material-icons-round">photo_camera_back</span> ç³»ç»Ÿç›¸æœº
                    </button>
                    <div class="shutter-btn" @click="takePhoto" :style="{opacity: cameraError?0.5:1}">
                        <div class="shutter-inner"></div>
                    </div>
                    <button class="btn-system-cam" style="background:#00c853; border-color:#00c853;" @click="saveAndCloseCamera">
                        <span class="material-icons-round">check</span> å®Œæˆ
                    </button>
                </div>
            </div>
        </div>

        <!-- 3. å¤šå›¾é¢„è§ˆ/ç®¡ç† å¼¹çª— -->
        <div class="modal-overlay" v-if="previewImageModal" @click.self="previewImageModal = false">
            <div class="modal-center" style="max-height:80vh;">
                <div style="font-size:18px; font-weight:700;">{{currentPhotoStudent?.name}} çš„ä½œä¸š</div>
                <div style="font-size:12px; color:#666; margin-bottom:10px;">å…± {{tempImages.length}} å¼ ç…§ç‰‡</div>
                <div class="preview-grid">
                    <div v-for="(img, idx) in tempImages" :key="idx" class="preview-item">
                        <img :src="img" class="preview-img" @click="viewSingleBig(img)">
                        <div class="preview-del" @click="deleteImage(idx)">Ã—</div>
                    </div>
                </div>
                <div style="display:flex; gap:10px;">
                    <button class="btn-full btn-blue" @click="openCamera(currentPhotoStudent); previewImageModal=false;">ç»§ç»­æ‹ç…§</button>
                    <button class="btn-full btn-red" @click="deleteAllImages">æ¸…ç©ºé‡æ‹</button>
                </div>
                <button style="margin-top:15px; width:100%; border:none; background:white; color:#666;" @click="previewImageModal = false">å…³é—­</button>
            </div>
        </div>
        
        <!-- 4. å•å¼ å¤§å›¾é¢„è§ˆ -->
        <div v-if="singleBigImg" style="position:fixed; inset:0; z-index:2000; background:black; display:flex; align-items:center; justify-content:center;" @click="singleBigImg=null">
            <img :src="singleBigImg" style="max-width:100%; max-height:100%;">
        </div>

        <!-- ç­çº§ç®¡ç† -->
        <div class="modal-overlay" v-if="showClassManager" @click.self="showClassManager = false">
            <div class="modal-center">
                <div style="font-size:18px; font-weight:700; margin-bottom:15px;">ç­çº§åå•ç®¡ç†</div>
                <div style="background:#f8f9fa; padding:15px; border-radius:10px; margin-bottom:15px;">
                    <div style="font-weight:600; margin-bottom:10px; font-size:14px;">â• æ‰‹åŠ¨æ·»åŠ å­¦ç”Ÿ</div>
                    <div style="display:grid; grid-template-columns: 80px 80px 1fr; gap:8px;">
                        <input v-model="newStudent.classId" placeholder="ç­çº§" style="padding:8px; border:1px solid #ddd; border-radius:6px;">
                        <input v-model="newStudent.no" placeholder="å­¦å·" style="padding:8px; border:1px solid #ddd; border-radius:6px;">
                        <input v-model="newStudent.name" placeholder="å§“å" style="padding:8px; border:1px solid #ddd; border-radius:6px;">
                    </div>
                    <button class="btn-full btn-blue" style="padding:8px; margin-top:8px; font-size:13px;" @click="addManualStudent">ç¡®è®¤æ·»åŠ </button>
                </div>
                <div style="max-height:200px; overflow-y:auto;">
                    <div v-for="cls in allClassList" :key="'m-'+cls" style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #eee;">
                        <span>{{ cls }}ç­</span>
                        <span style="color:var(--danger); cursor:pointer;" @click="deleteClass(cls)">åˆ é™¤æ•´ç­</span>
                    </div>
                </div>
                <button style="width:100%; padding:15px; border:none; background:none; color:#666;" @click="showClassManager = false">å…³é—­</button>
            </div>
        </div>

        <!-- è´¦æˆ·è®¾ç½® -->
        <div class="modal-overlay" v-if="showUserSetting" @click.self="showUserSetting = false">
            <div class="modal-center">
                <div style="font-size:18px; font-weight:700; margin-bottom:15px;">æˆ‘çš„ç­çº§è®¾ç½®</div>
                <div class="class-select-group">
                    <div v-for="cls in allClassList" :key="'set-'+cls" class="checkbox-item">
                        <input type="checkbox" :id="'set-chk-'+cls" :value="cls" v-model="currentUser.classes">
                        <label :for="'set-chk-'+cls">{{ cls }}ç­</label>
                    </div>
                </div>
                <button class="btn-full btn-blue" @click="updateUserClasses">ä¿å­˜</button>
            </div>
        </div>

        <!-- æ‰«æ & Toast & æ‰“å° -->
        <div v-if="scanning" style="position:fixed;inset:0;background:black;z-index:300;">
            <div id="reader" style="width:100%;height:100%"></div>
            <button style="position:absolute;bottom:50px;left:50%;transform:translate(-50%);padding:10px 30px;border-radius:30px;background:rgba(255,255,255,0.3);border:1px solid white;color:white;" @click="stopScan">å…³é—­æ‰«ç </button>
        </div>
        
        <div class="toast" :class="{show: toast.show, success: toast.type === 'success', error: toast.type === 'error'}">
            <span class="material-icons-round">{{ toast.type === 'success'?'check_circle':'info' }}</span><span>{{ toast.msg }}</span>
        </div>
        
        <div id="print-area">
            <div style="text-align:center;font-size:24px;margin-bottom:20px; font-weight:bold;">{{currentClass}}ç­ å­¦ç”ŸäºŒç»´ç </div>
            <div class="qr-grid">
                <div v-for="s in currentList" :key="'qr-'+s.uid" class="qr-card">
                    <div class="qr-img-container" :id="'qrcode-'+s.uid"></div>
                    <div style="font-weight:bold; font-size:16px;">{{s.name}}</div>
                    <div style="font-size:12px; color:#666;">{{s.classId}}ç­ - {{s.no}}å·</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, nextTick, onMounted } = Vue;
        const CONFIG = { binId: '6923c68543b1c97be9c111de', apiKey: '$2a$10$PzeIEyOc63K1OPPrCb1Y.uzvCUXWUEfsYmu.7gkaCMTsjJ3FLWM3u' };

        createApp({
            setup() {
                const subjects = ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­', 'ç§‘å­¦', 'ç¤¾ä¼š'];
                const currentSubject = ref('è¯­æ–‡');
                const currentClass = ref('');
                
                const roster = ref([]);
                const records = ref({});
                const users = ref([]);
                const notices = ref({});

                const isLoggedIn = ref(false);
                const currentUser = ref(null);
                const isRegistering = ref(false);
                const authForm = ref({ username: '', password: '', selectedClasses: [] });
                const authLoading = ref(false);
                
                const showMenu = ref(false);
                const showClassManager = ref(false);
                const showUserSetting = ref(false);
                const showWeChatTip = ref(false);
                const showNoticeModal = ref(false);
                const tempNoticeText = ref('');
                
                const cameraActive = ref(false);
                const cameraError = ref(false);
                const currentPhotoStudent = ref(null);
                const tempImages = ref([]);
                const previewImageModal = ref(false);
                const singleBigImg = ref(null);
                let videoStream = null;

                const scanning = ref(false);
                const printing = ref(false);
                const loading = ref(false);
                const toast = ref({ show: false, msg: '', type: 'info' });
                const newStudent = ref({ classId:'', no:'', name:'' });
                let html5QrcodeScanner = null;

                const allClassList = computed(() => [...new Set(roster.value.map(s => s.classId))].sort());
                const allowedClassList = computed(() => {
                    if (!currentUser.value || !currentUser.value.classes) return [];
                    return allClassList.value.filter(c => currentUser.value.classes.includes(c));
                });
                const currentList = computed(() => {
                    if (!currentClass.value) return [];
                    if (!allowedClassList.value.includes(currentClass.value)) return [];
                    const list = roster.value.filter(s => s.classId == currentClass.value);
                    const subRecords = records.value[currentSubject.value] || {};
                    return list.map(s => {
                        const rec = subRecords[s.uid];
                        let isDone = false, count = 0;
                        if(rec) {
                            if(rec === true) isDone = true;
                            else {
                                isDone = rec.submitted;
                                if(rec.imgs && Array.isArray(rec.imgs)) count = rec.imgs.length;
                                else if(rec.img) count = 1;
                            }
                        }
                        return { ...s, submitted: isDone, imgCount: count };
                    });
                });
                const submittedCount = computed(() => currentList.value.filter(s => s.submitted).length);
                const percentage = computed(() => currentList.value.length === 0 ? 0 : Math.round((submittedCount.value / currentList.value.length) * 100));
                const currentNotice = computed(() => (notices.value[currentClass.value] && notices.value[currentClass.value][currentSubject.value]) || '');

                const initStructure = () => {
                    subjects.forEach(sub => { if (!records.value[sub]) records.value[sub] = {}; });
                    if(!notices.value) notices.value = {};
                };
                const showToast = (msg, type='info') => { toast.value = { show: true, msg, type }; setTimeout(() => toast.value.show = false, 2000); };
                const getRec = (uid) => {
                    let r = records.value[currentSubject.value][uid];
                    if(!r) return { submitted:false, imgs:[] };
                    if(r === true) return { submitted:true, imgs:[] };
                    if(r.img && (!r.imgs || r.imgs.length===0)) r.imgs = [r.img];
                    if(!r.imgs) r.imgs = [];
                    return r;
                };
                const setRec = (uid, data) => { records.value[currentSubject.value][uid] = data; };

                const toggleStatus = (s) => {
                    const rec = getRec(s.uid);
                    if (rec.submitted) {
                        if(rec.imgs.length > 0 && confirm("è¯¥å­¦ç”Ÿæœ‰ç…§ç‰‡ï¼Œå–æ¶ˆå°†ä¸åˆ é™¤ç…§ç‰‡ä»…æ ‡è®°ä¸ºæœªäº¤ï¼Ÿ")) setRec(s.uid, { ...rec, submitted: false });
                        else if(rec.imgs.length === 0) delete records.value[currentSubject.value][s.uid];
                    } else {
                        setRec(s.uid, { ...rec, submitted: true, ts: Date.now() });
                        if(navigator.vibrate) navigator.vibrate(50);
                    }
                };

                const openNoticeModal = () => { tempNoticeText.value = currentNotice.value; showNoticeModal.value = true; };
                const saveNotice = () => {
                    if(!notices.value[currentClass.value]) notices.value[currentClass.value] = {};
                    notices.value[currentClass.value][currentSubject.value] = tempNoticeText.value;
                    showToast("å…¬å‘Šæ›´æ–°", "success"); showNoticeModal.value = false;
                };
                const clearNotice = () => { tempNoticeText.value = ''; saveNotice(); };

                const openCamera = async (s) => {
                    currentPhotoStudent.value = s; const rec = getRec(s.uid); tempImages.value = rec.imgs ? [...rec.imgs] : [];
                    cameraActive.value = true; cameraError.value = false;
                    nextTick(async () => {
                        try {
                            const video = document.getElementById('camera-feed');
                            videoStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
                            video.srcObject = videoStream; video.onloadedmetadata = () => { video.play(); };
                        } catch(e) { cameraError.value = true; }
                    });
                };
                const closeCamera = () => { if(videoStream) { videoStream.getTracks().forEach(t => t.stop()); videoStream = null; } cameraActive.value = false; currentPhotoStudent.value = null; };
                const triggerSystemCamera = () => { document.getElementById('system-camera-input').click(); };
                const handleSystemCamera = (e) => {
                    const file = e.target.files[0]; if(!file) return;
                    if(tempImages.value.length >= 10) return showToast("æœ€å¤š10å¼ ", "error");
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            const canvas = document.createElement('canvas'); const maxDim = 800; let w = img.width, h = img.height;
                            if(w>h && w>maxDim){ h*=maxDim/w; w=maxDim; } else if(h>maxDim){ w*=maxDim/h; h=maxDim; }
                            canvas.width = w; canvas.height = h; const ctx = canvas.getContext('2d'); ctx.drawImage(img, 0, 0, w, h);
                            tempImages.value.push(canvas.toDataURL('image/jpeg', 0.6));
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file); e.target.value = '';
                };
                const takePhoto = () => {
                    if(cameraError.value) return showToast("è¯·ä½¿ç”¨ç³»ç»Ÿç›¸æœºæŒ‰é’®", "error");
                    if(tempImages.value.length >= 10) return showToast("æœ€å¤š10å¼ ", "error");
                    const video = document.getElementById('camera-feed'); const canvas = document.getElementById('photo-canvas');
                    if(!video || !canvas) return;
                    const maxDim = 800; let w = video.videoWidth, h = video.videoHeight;
                    if(w>h && w>maxDim){ h*=maxDim/w; w=maxDim; } else if(h>maxDim){ w*=maxDim/h; h=maxDim; }
                    canvas.width = w; canvas.height = h; const ctx = canvas.getContext('2d'); ctx.drawImage(video, 0, 0, w, h);
                    tempImages.value.push(canvas.toDataURL('image/jpeg', 0.6));
                    if(navigator.vibrate) navigator.vibrate(50);
                };
                const saveAndCloseCamera = () => { if(currentPhotoStudent.value) { setRec(currentPhotoStudent.value.uid, { submitted: true, imgs: tempImages.value, ts: Date.now() }); showToast("ä¿å­˜æˆåŠŸ", "success"); } closeCamera(); };
                const viewImages = (s) => { currentPhotoStudent.value = s; const rec = getRec(s.uid); tempImages.value = rec.imgs ? [...rec.imgs] : []; previewImageModal.value = true; };
                const viewSingleBig = (img) => { singleBigImg.value = img; };
                const deleteImage = (idx) => { if(confirm("åˆ é™¤è¿™å¼ ?")) { tempImages.value.splice(idx, 1); const s = currentPhotoStudent.value; setRec(s.uid, { submitted: true, imgs: tempImages.value, ts: Date.now() }); if(tempImages.value.length === 0) previewImageModal.value = false; } };
                const deleteAllImages = () => { if(confirm("æ¸…ç©ºè¯¥å­¦ç”Ÿæ‰€æœ‰ç…§ç‰‡?")) { tempImages.value = []; setRec(currentPhotoStudent.value.uid, { submitted: true, imgs: [], ts: Date.now() }); previewImageModal.value = false; } };

                const addManualStudent = () => {
                    const { classId, no, name } = newStudent.value; if(!classId || !no || !name) return showToast("è¯·å¡«å†™å®Œæ•´", "error");
                    const newUid = `${String(classId).trim()}-${String(no).trim().padStart(2,'0')}`;
                    if(roster.value.some(s => s.uid === newUid)) return showToast("å·²å­˜åœ¨", "error");
                    roster.value.push({ classId: String(classId).trim(), no: String(no).trim().padStart(2,'0'), name: name.trim(), uid: newUid });
                    if(!currentUser.value.classes.includes(classId)) { currentUser.value.classes.push(classId); users.value = users.value.map(u => u.username === currentUser.value.username ? currentUser.value : u); }
                    newStudent.value = { classId:'', no:'', name:'' }; showToast("æ·»åŠ æˆåŠŸ", "success"); if(!currentClass.value) currentClass.value = classId;
                };

                const fetchCloudData = async (silent = false) => {
                    if(!silent) loading.value = true;
                    try {
                        const res = await fetch(`https://api.jsonbin.io/v3/b/${CONFIG.binId}/latest`, { headers: { 'X-Master-Key': CONFIG.apiKey } });
                        if(!res.ok) throw new Error("ç½‘ç»œ");
                        const json = await res.json(); const data = json.record || {};
                        if(data.roster) roster.value = data.roster; if(data.records) records.value = data.records;
                        if(data.users) users.value = data.users; if(data.notices) notices.value = data.notices;
                        initStructure();
                        if (isLoggedIn.value) { const updatedUser = users.value.find(u => u.username === currentUser.value.username); if (updatedUser) currentUser.value = updatedUser; }
                    } catch(e) { if(!silent) showToast("åŒæ­¥å¤±è´¥", "error"); } finally { if(!silent) loading.value = false; }
                };
                const saveToCloud = async () => { loading.value = true; try { await fetch(`https://api.jsonbin.io/v3/b/${CONFIG.binId}`, { method: 'PUT', headers: { 'Content-Type': 'application/json', 'X-Master-Key': CONFIG.apiKey }, body: JSON.stringify({ updatedAt: Date.now(), roster: roster.value, records: records.value, users: users.value, notices: notices.value }) }); } catch(e) { throw e; } finally { loading.value = false; } };
                const handleAuth = async () => {
                    if(!authForm.value.username || !authForm.value.password) return showToast("è¯·è¾“å…¥è´¦å·å¯†ç ", "error");
                    authLoading.value = true;
                    try {
                        await fetchCloudData(true);
                        const { username, password, selectedClasses } = authForm.value;
                        const user = users.value.find(u => u.username === username);
                        if (isRegistering.value) {
                            if (user) throw new Error("ç”¨æˆ·åå·²å­˜åœ¨");
                            const newUser = { username, password, classes: selectedClasses }; users.value.push(newUser);
                            await saveToCloud(); currentUser.value = newUser; isLoggedIn.value = true;
                        } else {
                            if (!user || user.password !== password) throw new Error("è´¦å·æˆ–å¯†ç é”™è¯¯");
                            currentUser.value = user; isLoggedIn.value = true;
                        }
                        if (allowedClassList.value.length > 0) currentClass.value = allowedClassList.value[0];
                    } catch (e) { showToast(e.message, "error"); } finally { authLoading.value = false; }
                };
                const toggleAuthMode = () => { isRegistering.value = !isRegistering.value; authForm.value.selectedClasses = []; };
                const logout = () => { isLoggedIn.value = false; currentUser.value = null; showMenu.value = false; showToast("å·²é€€å‡º"); };
                const uploadData = async () => { try { await saveToCloud(); showToast("ä¸Šä¼ æˆåŠŸ", "success"); } catch(e) { showToast("ä¸Šä¼ å¤±è´¥", "error"); } };
                const downloadData = async () => { if(confirm("è¦†ç›–æœ¬åœ°ï¼Ÿ")) { await fetchCloudData(); showToast("ä¸‹è½½æˆåŠŸ", "success"); } };
                const updateUserClasses = async () => { const idx = users.value.findIndex(u => u.username === currentUser.value.username); if (idx !== -1) { users.value[idx].classes = currentUser.value.classes; await saveToCloud(); showToast("å·²ä¿å­˜", "success"); showUserSetting.value = false; if (!allowedClassList.value.includes(currentClass.value)) currentClass.value = allowedClassList.value[0] || ''; } };
                const triggerFileUpload = () => { document.getElementById('file-upload').click(); };
                const handleFileUpload = (e) => {
                    const file = e.target.files[0]; if (!file) return;
                    const reader = new FileReader(); reader.onload = (evt) => {
                        try {
                            const wb = XLSX.read(new Uint8Array(evt.target.result), { type: 'array' });
                            const json = XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]]); const newRoster = [];
                            json.forEach(row => { const c = row['ç­çº§']||row['class']; const n = row['å­¦å·']||row['no']; const name = row['å§“å']||row['name']; if(c && name) newRoster.push({ classId:String(c).trim(), no:String(n||'').trim().padStart(2,'0'), name, uid:`${String(c).trim()}-${String(n||'').trim().padStart(2,'0')}` }); });
                            if (newRoster.length > 0 && confirm(`è¯†åˆ«åˆ° ${newRoster.length} äººï¼Œç¡®å®šå¯¼å…¥ï¼Ÿ`)) { const exist = new Set(roster.value.map(s=>s.uid)); roster.value = [...roster.value, ...newRoster.filter(s=>!exist.has(s.uid))]; showToast("å¯¼å…¥æˆåŠŸ", "success"); if(currentUser.value.classes.length === 0) { showUserSetting.value = true; showToast("è¯·å‹¾é€‰æ‚¨çš„ç­çº§", "info"); } }
                        } catch (err) { showToast("è§£æå¤±è´¥", "error"); } e.target.value = ''; showMenu.value = false;
                    }; reader.readAsArrayBuffer(file);
                };
                const deleteClass = (c) => { if(confirm(`åˆ é™¤ ${c} ç­æ•°æ®ï¼Ÿ`)) { roster.value = roster.value.filter(s=>s.classId!==c); subjects.forEach(sub => { if(records.value[sub]) Object.keys(records.value[sub]).forEach(uid => { if(uid.startsWith(c+'-')) delete records.value[sub][uid]; }); }); if(currentClass.value===c) currentClass.value = allowedClassList.value[0]||''; showToast("å·²åˆ é™¤", "success"); } };
                const exportExcel = () => {
                    if(navigator.userAgent.match(/MicroMessenger/i)) { showMenu.value = false; showWeChatTip.value = true; return; }
                    const data = currentList.value.map(s => ({ "ç­çº§":s.classId, "å­¦å·":s.no, "å§“å":s.name, "ç§‘ç›®":currentSubject.value, "çŠ¶æ€": s.submitted ? "å·²äº¤" : "æœªäº¤", "å›¾ç‰‡æ•°": s.imgCount }));
                    const wb = XLSX.utils.book_new(); XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(data), currentSubject.value);
                    XLSX.writeFile(wb, `${currentClass.value}ç­_${currentSubject.value}_ç»Ÿè®¡.xlsx`); showMenu.value=false;
                };
                const resetCurrentSubject = () => { if(confirm("é‡ç½®å½“å‰ç§‘ç›®è®°å½•ï¼Ÿ")) { records.value[currentSubject.value]={}; showToast("å·²é‡ç½®"); showMenu.value=false; } };
                const preparePrint = async () => { showMenu.value = false; if(currentList.value.length === 0) return showToast("æ— æ•°æ®"); printing.value = true; await nextTick(); document.querySelectorAll('.qr-img-container').forEach(e => e.innerHTML=''); currentList.value.forEach(s => { const el = document.getElementById('qrcode-' + s.uid); if(el) new QRCode(el, { text: s.uid, width: 120, height: 120 }); }); setTimeout(() => { window.print(); setTimeout(() => printing.value = false, 1000); }, 500); };

                const startScan = () => {
                    scanning.value = true;
                    nextTick(() => {
                        html5QrcodeScanner = new Html5Qrcode("reader");
                        html5QrcodeScanner.start({ facingMode: "environment" }, { fps: 10, qrbox: { width: 250, height: 250 } }, (txt) => {
                            const s = roster.value.find(i => i.uid === txt);
                            if (s) {
                                // æ‰«ç æˆåŠŸé€»è¾‘
                                setRec(txt, { ...getRec(txt), submitted: true, ts: Date.now() });
                                
                                // --- æ ¸å¿ƒï¼šéœ‡åŠ¨åé¦ˆ ---
                                if (navigator.vibrate) {
                                    try { navigator.vibrate(200); } catch(e){}
                                }
                                // -------------------

                                showToast(`${s.name} OK`, "success");
                            }
                        });
                    });
                };
                const stopScan = () => { if(html5QrcodeScanner) html5QrcodeScanner.stop().then(()=>{html5QrcodeScanner.clear();scanning.value=false;}); else scanning.value=false; };

                onMounted(() => fetchCloudData(true));

                return {
                    subjects, currentSubject, currentClass, allowedClassList, allClassList, currentList, percentage, submittedCount,
                    isLoggedIn, currentUser, isRegistering, authForm, authLoading, showMenu, showClassManager, showUserSetting, showWeChatTip, showNoticeModal, tempNoticeText, currentNotice,
                    scanning, printing, loading, toast, newStudent, cameraActive, cameraError, previewImageModal, singleBigImg, currentPhotoStudent, tempImages,
                    handleAuth, toggleAuthMode, logout, updateUserClasses, toggleStatus, openNoticeModal, saveNotice, clearNotice, openCamera, closeCamera, triggerSystemCamera, handleSystemCamera, takePhoto, saveAndCloseCamera, viewImages, viewSingleBig, deleteImage, deleteAllImages, addManualStudent, deleteClass, triggerFileUpload, handleFileUpload, exportExcel, resetCurrentSubject, uploadData, downloadData, preparePrint, startScan, stopScan
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
